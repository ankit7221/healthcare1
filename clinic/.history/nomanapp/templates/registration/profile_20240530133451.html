{% extends "home.html" %}

{% block content %}
  <div class="container my-4">
    <h2>Profile</h2>
    <p>Username: {{ request.user.username }}</p>
    <p>Email: {{ request.user.email }}</p>
  </div>

  <div class="container my-4">
    <h2>Appointments</h2>
    {% if appointments %}
      {% for appointment in appointments %}
        <div class="appointment">
          <h3 class="appointment-title" onclick="toggleDetails(this)">Appointment {{ forloop.counter }}</h3>
          <div class="appointment-details" style="display: none;">
            <p>Name: {{ appointment.name }}</p>
            <p>Email: {{ appointment.email }}</p>
            <p>Date: {{ appointment.date }}</p>
            <p>Time: {{ appointment.time }}</p>
            <p>Department: {{ appointment.department }}</p>
            <p>Message: {{ appointment.message }}</p>
          </div>
        </div>
      {% endfor %}
    {% else %}
      <p>No appointments booked.</p>
    {% endif %}
  </div>

  <script>
    function toggleDetails(element) {
      var details = element.nextElementSibling;
      if (details.style.display === "none") {
        details.style.display = "block";
      } else {
        details.style.display = "none";
      }
    }
  </script>
{% endblock %}
